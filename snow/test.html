<!DOCTYPE html>
<html>
<head>
	<title>Snow Fall | Animated background with JavaScript, jQuery, and CSS</title>
	<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="page.css">
	<script type="text/javascript" src="page.js"></script>
</head>

<body>
	<div class="snow-fall"></div>
	<div class="header">
		<div class="title">Snow</div>
		<div class="class">Fall</div>
	</div>
	<button class="source">Source</button>
	<button class="refresh" onclick="snowFall(snow)">Refresh</button>
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<style>
	.snow-fall {
		width: 100vw;
		height: 100vh;
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		padding: 0;
		overflow-y: hidden;
	}

	.dot { 
		background-color: #FFAFAF;  /* changes dot color */
		border-radius: 100%;
		position: fixed;
		z-index: -1;
		opacity:  0;
	}

	.snow-fall .dot {
		/*animation:  fall infinite linear;*/
		position: relative;
	}
	
	/*@keyframes fall {
		0% {
			top:  0;
		} 100% {
			top: 100vh;
		}
	}*/
</style>

<script>
	const container = document.querySelector('.snow-fall');
	const dot = document.getElementsByClassName('dot');
	const $dots = $('.dot');

	function randomInt(min, max) {
		const output = Math.floor(Math.random() * (max - min + 1) + min);
		return output;
	}

	function create(amt) {
		for (let i = 0; i < amt; i++) {
			let div = document.createElement('div');
			div.className = 'dot';
			container.appendChild(div);
			let size = `${randomInt(5, 10)}px`;       // sets dot size range in px
			let xlocation = `${randomInt(0, 100)}%`; // sets dot x start range in %
			let ylocation = `${randomInt(0, 95)}%`; // sets dot y start range in %
			dot[i].style.height = size;
			dot[i].style.width = size;
			dot[i].style.left = xlocation;
			dot[i].style.top = ylocation;
			animate(dot[i]);
		}
	}

	function place(i) {
		i.style.left = xlocation;
		i.style.top = ylocation;
	}

	function animate(i) {
		const height = window.innerHeight;
		const position = i.getBoundingClientRect();	
		let offset = randomInt(position.left - 50, position.left + 50) + 'px';
		let duration = randomInt(15000, 25000);

		$(i).animate({
			opacity: '1'
		},{
			queue: false,
			duration: 500
		}).animate({
			top:`${height}px`,
			left: offset,
		}, duration, 'linear');
	}

	function initial() {
		const num = randomInt(40, 80);
		for (let i = 0; i < num; i++) {
			create(num[i]);
			place(num[i]);
			animate(num[i]);
		}
	}

	function repeat() {
		const num = randomInt(20, 40);
		for (let i = 0; i < num; i++) {
			create(num[i]);
			animate(num[i]);
		}
	}

	initial();
</script>

</html>
